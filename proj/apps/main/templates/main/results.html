{% extends "main/base.html" %}
{% load maven %}
{% load static %}
{% load assets %}
{% load crispy_forms_tags %}

{% block head-styles %}    
<style>
.title {
    text-align: center;
    font-weight: 600 !important;
    font-size: 20px !important;
    line-height: 20px !important;
    margin-bottom: 0px !important;
}
.subtitle {
    text-align: center;
    font-weight: 4400 !important;
    font-size: 14px !important;
    line-height: 16px !important;
    margin-bottom: 0px !important;
}
table.summary-table td {
    font-weight: 500; font-size: 16px !important;
}
</style>
{% endblock %}

{% block content %}
<div class="title">Results Chart</title>
<div class="subtitle">Team Minutes per Challenge</title>
<div style="height: 20px"></div>
<div style="height: 400px">
<canvas id="results-chart"></canvas>
</div>

<div style="height: 40px"></div>
<div class="title">Team Raw Data</title>
<div class="subtitle">Teams Ranked by Challenge</title>
<div style="height: 20px"></div>

<div style="margin-left: auto; margin-right: auto; text-align: left;">
    <table class="summary-table" style="width: 100%; max-width: 600px; margin-left: auto; margin-right: auto; ">
    {% for entry in summary %}
    <tr><td colspan="4" style="padding: 2px; font-weight: 700; font-size: 16px; background-color: #666; color: #fff;">{{ entry.name|safe }}</td></tr>
    <tr><td style="font-weight: 700;">Rank</td><td style="font-weight: 700;">Team</td><td style="font-weight: 700; text-align: right;">Time</td><td style="font-weight: 700; text-align: right; padding-right: 4px; ">Back</td></tr>
    {% for team in entry.teams %}
    <tr><td><div style="text-align: center; color: #fff; font-family: helvetica; font-size: 12px; font-weight: 700; width: 20px; height: 20px; border-radius: 10px; background-color: {{ team.color|safe }}">{{ forloop.counter|safe }}</div></td><td>{{ team.name|safe }}</td><td style="font-family: helvetica; text-align: right; font-size: 14px !important;">{{ team.time_str|safe }}</td><td style="padding-right: 4px; font-family: helvetica; text-align: right; font-size: 14px !important;">{{ team.back_str|safe }}</td></tr>
    {% endfor %}
    <tr><td colspan="4" style="height: 12px; padding: 2px; font-weight: 700; font-size: 16px; background-color: #fff; color: #fff;"></td></tr>

    {% endfor %}
    </table>
</div>

<!--
<div style="height: 40px"></div>
<div class="title">All-time Standings</title>
<div class="subtitle">Through 2023</title>
<div style="height: 20px"></div>

<div style="margin-left: auto; margin-right: auto; text-align: left;">
    <div style="width: 100%; max-width: 600px; margin-left: auto; margin-right: auto; ">
        <img src="/media/2024/ChristmasChallengeStandings.png" style="max-width: 100%; height: auto;">
    </div>
</div>
-->

{% endblock %}

{% block post-script %}
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script>
"use strict";
$(document).ready(function() {
  const resultsChart = new Chart(
    document.getElementById('results-chart'),
    {{ data|safe }}
  );    
});
</script>
{% endblock %}

